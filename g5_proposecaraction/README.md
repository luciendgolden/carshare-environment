# G5_proposeCarAction

## Description
Car proposes actions based on the current state

## (Optional) Installation
Docker handles all the python requirements. If you'd like to run the app directly, install the requirements:<br/>
`python -m pip install -r requirements.txt`
<br/> Python 3.8 or higher is required.

## Usage

To build and start the application, run docker:<br/>
`docker-compose up`

If you make any changes, use --build to rebuild the container:<br/>
`docker-compose up --build`

http://127.0.0.1:8080/api/docs/ -- Swagger API (host may vary, check docker output for the real IP)<br/>
http://127.0.0.1:8080/car-actions -- Endpoint. Send POST with input (as JSON) here to recieve proposed actions (also JSON). Can be done via Swagger.

There are five predefined examples in the Swagger API that show how to use the system. You can edit them directly in browser to change the input.

You can also call main.py directly with hard-coded test input. To test the application, run:<br/>
`python main.py`

To create a plot for a variable, run:<br/>
`python create_plot.py [fuel|temperature|etc]`

## Requests
```json
{
	"temperature": 2,
	"ride_time": 35,
	"fuel": 11,
	"traffic_congestion": 20,
	"visibility": 150,
	"poi": 0.5,
	"car_maintenance_history": 5,
	"daytime": "20:15"
}
```

## Architecture

A Python-based web application built with Flask framework (rest.py) handles API requests and delivers responses in a stateless manner. The input data, representing the car’s current state, is sent as a JSON payload (pre-defined in Swagger for testing). The output is delivered as a JSON that lists the proposed actions.

The fuzzy inference process is implemented (main.py) using the fuzzylogic library for Python. The variables are defined as domains (variables/*). The rules are defined in rules.py and then aggregated in fis.py. To visualize the membership functions, we use the Matplotlib library (create_plot.py).

We containerize our application using Docker (Dockerfile, docker-compose.yml).

Swagger is used for easy testing with pre-defined inputs (static/swagger.json).

## Authors
Group 5 Fuzzy Logic:

Bobko Yuliia, Ligori Armela, Mehran Farkhondeh, Mühlbauer Thomas, Tekhov Oleksii

# Used code
.gitignore was generated by https://www.toptal.com/developers/gitignore/api/python (CC0: https://creativecommons.org/publicdomain/zero/1.0/)<br/><br/>
fuzzylogic library was downloaded from https://github.com/Python-Fuzzylogic/fuzzylogic (MIT: https://github.com/Python-Fuzzylogic/fuzzylogic/blob/master/LICENSE)


## (Optional) Install local library:
**Q:** Why do this?<br/>
**A:** To edit the library for our purposes.<br/>
**A:** fuzzylogic.classes.Rule.weights() function was added. With it, you can access weights (membership values) of the output values. Without it, you can only access the defuzzified (via COG) crisp output.

1. Uninstall fuzzylogic: `python -m pip uninstall fuzzylogic`.
2. Install the local library: `python -m pip install -e fuzzylogic/` where "fuzzylogic/" is the path to the local library.
3. After this, whatever changes you make to the local library code will take effect immideately.
4. To go back to using the default library, uninstall `pip uninstall fuzzylogic` and install `pip install fuzzylogic` again.
